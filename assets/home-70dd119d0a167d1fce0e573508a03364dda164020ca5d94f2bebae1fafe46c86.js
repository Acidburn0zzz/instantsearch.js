var PRNG=function(){this.seed=1,this.next=function(){return this.gen()/2147483647},this.nextRange=function(e,t){return e+(t-e)*this.next()},this.gen=function(){return this.seed=16807*this.seed%2147483647}};$(function(){var e=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onLeave"}}),t=$("section.window"),o=$("#anim"),n=$("#anim-overlay"),a=$("#space-overlay"),i=$(".screen"),c=$(".widget"),r=$(".widget-intro"),s=$(".illus-sync"),d=$("#screenshot-website"),l=$("#anim-overlay img"),w=o.find(".widget-1"),p=o.find(".widget-2"),y=o.find(".widget-3"),u=o.find(".widget-4"),g=o.find(".widget-5"),m=o.find(".widget-6"),E=o.find(".widget-7"),h=new TimelineMax;h.set(i,{opacity:0}).set(o,{opacity:0,scale:0}).set(d,{opacity:0}).set(n,{opacity:0}).set(l,{scale:0}).set(c,{opacity:0,scale:0}).to(o,2,{opacity:1,scale:1,rotationX:30,rotationZ:-6,ease:Power2.easeInOut}).to(d,1,{opacity:1},"-=1").to(w,.3,{scale:1,opacity:1}).to(p,.3,{scale:1,opacity:1}).to(y,.3,{scale:1,opacity:1}).to(u,.3,{scale:1,opacity:1},"-=.2").to(g,.3,{scale:1,opacity:1},"-=.2").to(m,.3,{scale:1,opacity:1},"-=.2").to(E,.3,{scale:1,opacity:1},"-=.5").to(n,.3,{opacity:1,ease:Power2.easeInOut},"3.5").to(l,.4,{scale:1,ease:Bounce.easeInOut},"3.6");var f=[];f[0]=new TimelineMax,f[0].to(r,2,{opacity:0}).to(c,8,{z:400,opacity:0}).to(w,8,{y:-350},"-=8").to(y,8,{x:-200,y:-50},"-=8").to(u,8,{x:-200},"-=8").to(g,8,{x:-200,y:50},"-=8").to(m,8,{x:-200,y:200},"-=8").to(E,8,{y:350},"-=8").to(o,8,{opacity:1,scale:1,rotationX:0,rotationZ:0,ease:Power2.easeInOut},"-=8").to(s,4,{opacity:1},"-=4").to(a,8,{backgroundColor:"#00B6BA"},"0"),f[1]=new TimelineMax,f[1].to(c,.2,{x:0,y:0,z:0,scale:0}).to(s,3,{scale:0,opacity:0},"+=3").to(o,3,{scale:.5},"-=3").to(d,4,{opacity:0},"-=5").to("#anim > .widget",2,{opacity:1,scale:1}).to("#screen-1",3,{opacity:1}).to("#screen-1 .widget",5,{opacity:1,scale:1},"-=2").to("#screen-2",3,{opacity:1}).to("#screen-2 .widget",5,{opacity:1,scale:1},"-=2").to("#screen-3",3,{opacity:1}).to("#screen-3 .widget",5,{opacity:1,scale:1},"-=2").to(a,8,{backgroundColor:"#F6624E"},"0"),f[2]=new TimelineMax,f[2].to(o,10,{scale:1,y:100,rotationX:20,rotationZ:-6,ease:Power2.easeInOut}).to(i,5,{opacity:0},"-=8").to(g,4,{z:200}).to(g,4,{rotationY:180,backgroundColor:"#674492"},"-=2").to(g,4,{z:0}).to(a,8,{backgroundColor:"#674492"},"0"),f[3]=new TimelineMax,f[3].to(o,12,{y:-400,rotationX:60},"2s").to(o,4,{opacity:0},"5");for(var v=[],x=0;x<t.length;x++)v[x]=new ScrollMagic.Scene({triggerElement:t[x],duration:800}).setTween(f[x]).offset(20).addTo(e);v[0].on("start",function(){h.seek(20)}),v[3].on("leave",function(){$("body:after").addClass("hide")})}),document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("script");e.src="js/three.min.js",e.addEventListener("load",function(){var e=document.querySelector("#space"),t=new PRNG,o=1e4,n=new THREE.Scene;n.fog=new THREE.FogExp2(0,1/o);var a=new THREE.WebGLRenderer({alpha:!0}),i=new THREE.PerspectiveCamera(55,.66,.1,10*o),c=function(){var e=window.innerWidth,t=window.innerHeight,o=e/t;i.aspect=o,a.setSize(window.innerWidth,window.innerHeight)};c(),window.addEventListener("resize",c),e.appendChild(a.domElement);for(var r=new THREE.Geometry,s=new THREE.Sphere(new THREE.Vector3(0,0,0),o),d=function(){return t.nextRange(-o,o)},l=0;3e4>l;l++){var w=new THREE.Vector3(d(),d(),d());w=s.clampPoint(w),r.vertices.push(w)}var p=new THREE.PointsMaterial({color:16777215,size:1,sizeAttenuation:!1,alphaTest:.5,transparent:!0,blending:THREE.AdditiveBlending}),y=new THREE.Points(r,p);n.add(y),i.position.z=-1500,i.position.y=1500,i.rotation.x=-Math.PI/2+.5;var u=.001,g=function(e){var t=e;return e>200&&(t+=30*Math.max(Math.min(e,800)-200,0)),e>1100&&(t+=30*Math.max(Math.min(e,1700)-1100,0)),e>2e3&&(t+=30*Math.max(Math.min(e,2600)-2e3,0)),t/100},m=0,E=null,h=function(){requestAnimationFrame(h);var e=g(window.scrollY);if(m+=(e-m)/10,e+u>m&&m>e-u&&(m=e),E!==m){E=m;var t=m/60;y.rotation.y=-t,a.render(n,i)}};h(),e.className="loaded"}),document.body.appendChild(e)});