<!DOCTYPE html><html><head><base href="/instantsearch.js/react/"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta charset="utf-8"><meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport"><link rel="icon" href="assets/img/react-instant-favicon.png"><meta content="Add instant-search and autocomplete to your React and React Native apps with a few lines of code. Powered by Algolia." name="description"><!-- / Twitter card--><meta content="summary_large_image" name="twitter:card"><meta content="https://community.algolia.com/instantsearch.js/react/" name="twitter:site"><meta content="Algolia" name="twitter:creator"><meta content="React InstantSearch" name="twitter:title"><meta content="⚡ Lightning-fast search for React and React Native apps" name="twitter:description"><meta content="http://res.cloudinary.com/hilnmyskv/image/upload/v1481193392/meta-instant-search-react_hrf6st.jpg" name="twitter:image"><!-- / OG meta--><meta content="https://community.algolia.com/instantsearch.js/react/" property="og:url"><meta content="React InstantSearch" property="og:title"><meta content="http://res.cloudinary.com/hilnmyskv/image/upload/v1481193392/meta-instant-search-react_hrf6st.jpg" property="og:image"><meta content="website" property="og:type"><meta content="⚡ Lightning-fast search for React and React Native apps" property="og:description"><meta content="React InstantSearch" property="og:site_name"><title>React InstantSearch | Custom connectors</title><link rel="stylesheet" href="stylesheets/header.css"><link rel="stylesheet" href="stylesheets/index.css"></head></html><body class="documentation"><nav class="cm-navigation"><div class="cm-navigation__brands"><div class="cm-navigation__brands--algolia"><a id="algoliaLogo" href="https://algolia.com"><img src="images/logo-algolia.svg" width="100" alt="Algolia logo"></a></div><div class="cm-navigation__brands--community"><a class="cm-badge no-mobile" href="https://community.algolia.com" title="Click to go to community, hover to access latest community projects"><img src="images/logo-community.svg"> <span>Community</span></a></div><div class="cm-navigation__brands--project"><a href="">React InstantSearch</a></div><div class="cm-navigation__dropdown-holder"><div class="cm-navigation__brands-dropdown"><div class="cm-navigation__brands-dropdown__container"><div data-inject-community=""></div></div><div class="cm-navigation__brands-dropdown__footer"><a href="https://community.algolia.com"><img class="community-logo" src="https://res.cloudinary.com/hilnmyskv/image/upload/v1484219849/algolia-community-logo-words.svg"></a></div></div></div></div><div class="cm-navigation__menu-mobile-trigger"><button id="open-menu"><img src="images/menu-icon.svg"></button></div><div class="cm-navigation__menu"><div class="cm-menu__search"><div class="cm-menu__search--holder"><div class="cm-search__input"><input id="searchbox" placeholder="Search something.." type="search"><button id="search"><svg><use xlink:href="#search-icon"></use></svg></button><button id="cancel"><svg><use xlink:href="#cancel-icon"></use></svg></button></div></div></div><ul class="cm-menu__list"><li class="cm-menu__list__item"><a href="Getting_started.html" data-link="true">Getting started</a></li><li class="cm-menu__list__item active"><a href="guide/" data-link="true">Guide</a></li><li class="cm-menu__list__item"><a class="dropdown-toggler" aria-controls="dropdown-1" aria-expanded="false" data-toggle-dropdown="dropdown-1">API <span class="glyph">&#x25BC;</span></a><ul class="simple-dropdown" id="dropdown-1" role="tree" tabindex="-1"><li><a href="widgets/InstantSearch.html" role="treeitem" data-link="true">&lt;InstantSearch&gt;</a></li><li><a href="widgets/" role="treeitem" data-link="true">Widgets</a></li><li><a href="connectors/" role="treeitem" data-link="true">Connectors</a></li></ul></li><li class="cm-menu__list__item"><a class="dropdown-toggler" aria-controls="dropdown-2" aria-expanded="false" data-toggle-dropdown="dropdown-2">Examples <span class="glyph">&#x25BC;</span></a><ul class="simple-dropdown" id="dropdown-2" role="tree" tabindex="-1"><li><a href="examples/Demos.html" role="treeitem" data-link="true">Demos</a></li><li><a href="examples/Recipes.html" role="treeitem" data-link="true">Recipes</a></li></ul></li><li class="cm-menu__list__item"><a href="https://github.com/algolia/instantsearch.js/tree/v2" data-link="true"><figure class="github-icon"><svg width="40px" height="39px"><use xlink:href="#github-icon"></use></svg><figcaption>GitHub</figcaption></figure></a></li></ul></div></nav><svg style="display: none;"><defs><symbol id="search-icon" viewbox="0 0 15 15"><path d="M10.052 10.88c-1.1.91-2.483 1.406-3.91 1.403C2.75 12.283 0 9.533 0 6.14 0 2.75 2.75 0 6.142 0c3.392 0 6.14 2.75 6.14 6.142 0 1.485-.526 2.847-1.403 3.91l3.95 3.95c.227.227.228.596-.002.826-.228.227-.597.228-.826 0l-3.95-3.95zm-3.91.234c2.745 0 4.972-2.227 4.972-4.972 0-2.747-2.227-4.972-4.972-4.972-2.747 0-4.972 2.225-4.972 4.972 0 2.745 2.225 4.972 4.972 4.972z" fill-rule="evenodd"></path></symbol><symbol id="cancel-icon" viewbox="0 0 13 13"><path d="M5.274 6.5L.614 1.84 0 1.225 1.226 0l.613.613 4.66 4.66 4.66-4.66.614-.613L13 1.226l-.613.613-4.66 4.66 4.66 4.66.613.614L11.774 13l-.613-.613-4.66-4.66-4.66 4.66-.614.613L0 11.774l.613-.613" fill-rule="evenodd"></path></symbol><symbol id="github-icon" viewbox="0 0 40 39"><path id="Shape" d="M19.998,0 C8.955,0 0,8.954 0,20 C0,28.837 5.73,36.333 13.678,38.977 C14.678,39.161 15.043,38.544 15.043,38.013 C15.043,37.538 15.026,36.281 15.016,34.613 C9.453,35.82 8.28,31.93 8.28,31.93 C7.37,29.62 6.058,29.005 6.058,29.005 C4.242,27.765 6.195,27.79 6.195,27.79 C8.203,27.93 9.259,29.85 9.259,29.85 C11.042,32.907 13.939,32.024 15.079,31.512 C15.259,30.222 15.777,29.339 16.349,28.839 C11.907,28.334 7.239,26.617 7.239,18.954 C7.239,16.771 8.019,14.984 9.297,13.587 C9.091,13.081 8.404,11.047 9.493,8.294 C9.493,8.294 11.173,7.756 14.993,10.344 C16.624924,9.89926425 18.308563,9.672627 20,9.67 C21.7,9.68 23.41,9.9 25.008,10.345 C28.826,7.757 30.502,8.295 30.502,8.295 C31.592,11.048 30.907,13.082 30.702,13.588 C31.984,14.985 32.757,16.772 32.757,18.955 C32.757,26.638 28.081,28.329 23.627,28.823 C24.343,29.441 24.983,30.661 24.983,32.526 C24.983,35.201 24.958,37.358 24.958,38.013 C24.958,38.549 25.318,39.171 26.334,38.976 C34.274,36.326 40,28.836 40,20 C40,8.955 31.045,0 19.998,0"></path></symbol></defs></svg><section class="hero-section shrink"><div class="container"><div class="hero-container"><div class="fl-left article-title doc-only"><figure><img src="images/react-instant-search-logo.svg" width="46"><figcaption><h1>Guide &gt; <span>Custom connectors</span></h1></figcaption></figure></div></div></div></section><section class="documentation-section"><a class="sidebar-opener"></a><div class="container"><nav class="sidebar"><div class="sidebar-container"><h2 class="sidebar-header">Guide</h2><ul class="sidebar-elements"><li class="sidebar-element level-h2 navItem guide"><a href="guide/index.html">Welcome</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Install.html">Install</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/&lt;InstantSearch&gt;.html">&lt;InstantSearch&gt;</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Widgets.html">Widgets</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Styling_widgets.html">Styling widgets</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Highlighting_results.html">Highlighting results</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/i18n.html">i18n</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Sorting_and_filtering.html">Sorting and filtering items</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Connectors.html">Connectors</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Default_refinements.html">Default refinements</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Searching_in_Lists.html">Searching in *Lists</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Virtual_widgets.html">Virtual widgets</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Routing.html">Routing</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Search_parameters.html">Search parameters</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Search_state.html">Search state</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Operations.html">Operations</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Multi_index.html">Multi index</a><ul></ul></li><li class="sidebar-element level-h2 navItem-active guide"><a class="navItem-active" href="guide/Custom_connectors.html">Custom connectors</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Conditional_display.html">Conditional Display</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/React_native.html">React native</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Server-side_rendering.html">Server-side rendering</a><ul></ul></li><li class="sidebar-element level-h2 navItem guide"><a href="guide/Autocomplete_menu.html">Autocomplete menu</a><ul></ul></li></ul></div></nav><div class="documentation-container"><div class="content"><p>If you wish to implement features that are not covered by the default widgets connectors,
you will need to create your own connector via the <code>createConnector</code> method.</p>
<p>We tried very hard to make React InstantSearch a pluggable library that is able to solve
most use cases in with simple API entries. But we could not plan everything and thus
in some cases the current API may not be able to fulfill this promise of simplicity.</p>
<p>If that’s not the case or in doubt, <strong>before diving into custom conectors</strong>
please expose us your use case and come ask us questions on <a href="https://discourse.algolia.com/c/instantsearch">discourse</a>
or <a href="https://github.com/algolia/instantsearch.js/issues">GitHub</a> first. We will be glad
that you do so.</p>
<p>If you are confident <code>createConnector</code> is what you need, here’s its API:</p>
<h2 id="const-connector-createconnectorimplementation"><code>const connector = createConnector(implementation)</code> <a class="anchor" href="guide/Custom_connectors.html#const-connector-createconnectorimplementation" aria-hidden="true"></a></h2>
<p><code>implementation</code> is an object whose shape and properties matches the following conventions:</p>
<h2 id="displayname-proptypes-defaultprops"><code>{displayName, propTypes, defaultProps}</code> <a class="anchor" href="guide/Custom_connectors.html#displayname-proptypes-defaultprops" aria-hidden="true"></a></h2>
<p>Those properties are directly applied to the higher-order component. Providing a <code>displayName</code> is mandatory.</p>
<h2 id="getprovidedpropsprops-searchstate-searchresults-meta-searchforfacetvaluesresults"><code>getProvidedProps(props, searchState, searchResults, meta, searchForFacetValuesResults)</code> <a class="anchor" href="guide/Custom_connectors.html#getprovidedpropsprops-searchstate-searchresults-meta-searchforfacetvaluesresults" aria-hidden="true"></a></h2>
<p>This method should return the props to forward to the composed component.</p>
<p><code>props</code> are the props that were provided to the higher-order component.</p>
<p><code>searchState</code> holds the search state of all widgets. You can find the shape of all widgets search state in <a href="guide/Search_state.html">the corresponding guide</a>.</p>
<p><code>searchResults</code> holds the search results, search errors and search loading state, with the shape <code>{results: ?SearchResults, error: ?Error, loading: bool}</code>. The <code>SearchResults</code> type is described in the <a href="https://community.algolia.com/algoliasearch-helper-js/reference.html#searchresults">Helper’s documentation</a>.</p>
<p><code>meta</code> is the list of metadata from all widgets whose connector defines a <code>getMetadata</code> method.</p>
<p><code>searchForFacetValuesResults</code> holds the search for facet values results.</p>
<h2 id="refineprops-searchstate-args"><code>refine(props, searchState, ...args)</code> <a class="anchor" href="guide/Custom_connectors.html#refineprops-searchstate-args" aria-hidden="true"></a></h2>
<p>This method defines exactly how the <code>refine</code> prop of widgets affects the search state.</p>
<p>It takes in the current props of the higher-order component, the <a href="guide/Search_state.html">search state</a> of all widgets, as well as all arguments passed to the <code>refine</code> and <code>createURL</code> props of stateful widgets, and returns a new state.</p>
<pre class="code-sample language-jsx">
  <div class="heading">Code</div>
  <div class="code-wrap">
    <code><span class="cs-keyword">import</span> {<span class="cs-def">createConnector</span>} <span class="cs-keyword">from</span> <span class="cs-string">&#39;react-instantsearch&#39;</span>;

<span class="cs-keyword">const</span> <span class="cs-def">CoolWidget</span> <span class="cs-operator">=</span> <span class="cs-variable">createConnector</span>({
  <span class="cs-property">displayName</span>: <span class="cs-string">&#39;CoolWidget&#39;</span>,

  <span class="cs-property">getProvidedProps</span>(<span class="cs-def">props</span>, <span class="cs-def">searchState</span>) {
    <span class="cs-comment">// Since the `queryAndPage` searchState entry isn&#39;t necessarily defined, we need</span>
    <span class="cs-comment">// to default its value.</span>
    <span class="cs-keyword">const</span> [<span class="cs-def">query</span>, <span class="cs-def">page</span>] <span class="cs-operator">=</span> <span class="cs-variable-2">searchState</span>.<span class="cs-property">queryAndPage</span> <span class="cs-operator">||</span> [<span class="cs-string">&#39;&#39;</span>, <span class="cs-number">0</span>];

    <span class="cs-comment">// Connect the underlying component to the `queryAndPage` searchState entry.</span>
    <span class="cs-keyword">return</span> {
      <span class="cs-property">query</span>,
      <span class="cs-property">page</span>,
    }
  },

  <span class="cs-property">refine</span>(<span class="cs-def">props</span>, <span class="cs-def">searchState</span>, <span class="cs-def">newQuery</span>, <span class="cs-def">newPage</span>) {
    <span class="cs-comment">// When the underlying component calls its `refine` prop, update the searchState</span>
    <span class="cs-comment">// with the new query and page.</span>
    <span class="cs-keyword">return</span> {
      <span class="cs-comment">// `searchState` represents the search state of *all* widgets. We need to extend it</span>
      <span class="cs-comment">// instead of replacing it, otherwise other widgets will lose their</span>
      <span class="cs-comment">// respective state.</span>
      <span class="cs-meta">...</span><span class="cs-variable-2">searchState</span>,
      <span class="cs-variable">queryAndPage</span>: [<span class="cs-variable-2">newQuery</span>, <span class="cs-variable-2">newPage</span>],
    };
  },
})(<span class="cs-def">props</span> <span class="cs-operator">=&gt;</span>
  <span class="cs-tag cs-bracket">&lt;</span><span class="cs-tag">div</span><span class="cs-tag cs-bracket">&gt;</span>
    The query is {<span class="cs-variable">props</span>.<span class="cs-property">query</span>}, the page is {<span class="cs-variable">props</span>.<span class="cs-property">page</span>}.
    {<span class="cs-comment">/*</span>
<span class="cs-comment">      Clicking on this button will update the searchState to:</span>
<span class="cs-comment">      {</span>
<span class="cs-comment">        ...otherSearchState,</span>
<span class="cs-comment">        query: &#39;algolia&#39;,</span>
<span class="cs-comment">        page: 20,</span>
<span class="cs-comment">      }</span>
<span class="cs-comment">    */</span>}
    <span class="cs-tag cs-bracket">&lt;</span><span class="cs-tag">button</span> <span class="cs-attribute">onClick</span>={() <span class="cs-operator">=&gt;</span> <span class="cs-variable">props</span>.<span class="cs-property">refine</span>(<span class="cs-string">&#39;algolia&#39;</span>, <span class="cs-number">20</span>)} <span class="cs-tag cs-bracket">/&gt;</span>
    {<span class="cs-comment">/*</span>
<span class="cs-comment">      Clicking on this button will update the searchState to:</span>
<span class="cs-comment">      {</span>
<span class="cs-comment">        ...otherSearchState,</span>
<span class="cs-comment">        query: &#39;instantsearch&#39;,</span>
<span class="cs-comment">        page: 15,</span>
<span class="cs-comment">      }</span>
<span class="cs-comment">    */</span>}
    <span class="cs-tag cs-bracket">&lt;</span><span class="cs-tag">button</span> <span class="cs-attribute">onClick</span>={() <span class="cs-operator">=&gt;</span> <span class="cs-variable">props</span>.<span class="cs-property">refine</span>(<span class="cs-string">&#39;instantsearch&#39;</span>, <span class="cs-number">15</span>)} <span class="cs-tag cs-bracket">/&gt;</span>
  <span class="cs-tag cs-bracket">&lt;/</span><span class="cs-tag">div</span><span class="cs-tag cs-bracket">&gt;</span>
);
</code>
  </div>
</pre>
<p>In the example above, we create a widget that reads and manipulates the <code>queryAndPage</code> state entry. However, we haven’t described how those entries should affect the search parameters passed to the Algolia client just yet.</p>
<h2 id="getsearchparameterssearchparameters-props-searchstate"><code>getSearchParameters(searchParameters, props, searchState)</code> <a class="anchor" href="guide/Custom_connectors.html#getsearchparameterssearchparameters-props-searchstate" aria-hidden="true"></a></h2>
<p>This method applies the current props and state to the provided <code>SearchParameters</code>, and returns a new <code>SearchParameters</code>. The <code>SearchParameters</code> type is described in the <a href="https://community.algolia.com/algoliasearch-helper-js/reference.html#searchparameters">Helper’s documentation</a>.</p>
<p>Every time the props or state of a widget change, all the <code>getSearchParameters</code> methods of all the registered widgets are called in a chain to produce a new <code>SearchParameters</code>. Then, if the output <code>SearchParameters</code> differs from the previous one, a new search is triggered.</p>
<p>As such, the <code>getSearchParameters</code> method allows you to describe how the state and props of a widget should affect the search parameters.</p>
<pre class="code-sample language-jsx">
  <div class="heading">Code</div>
  <div class="code-wrap">
    <code><span class="cs-keyword">import</span> {<span class="cs-def">createConnector</span>} <span class="cs-keyword">from</span> <span class="cs-string">&#39;react-instantsearch&#39;</span>;

<span class="cs-keyword">const</span> <span class="cs-def">CoolWidget</span> <span class="cs-operator">=</span> <span class="cs-variable">createConnector</span>({
  <span class="cs-comment">// displayName, getProvidedProps, refine</span>

  <span class="cs-property">getSearchParameters</span>(<span class="cs-def">searchParameters</span>, <span class="cs-def">props</span>, <span class="cs-def">searchState</span>) {
    <span class="cs-comment">// Since the `queryAndPage` state entry isn&#39;t necessarily defined, we need</span>
    <span class="cs-comment">// to default its value.</span>
    <span class="cs-keyword">const</span> [<span class="cs-def">query</span>, <span class="cs-def">page</span>] <span class="cs-operator">=</span> <span class="cs-variable">state</span>.<span class="cs-property">queryAndPage</span> <span class="cs-operator">||</span> [<span class="cs-string">&#39;&#39;</span>, <span class="cs-number">0</span>];

    <span class="cs-comment">// When the `queryAndPage` state entry changes, update the query and page of</span>
    <span class="cs-comment">// search.</span>
    <span class="cs-keyword">return</span> <span class="cs-variable-2">searchParameters</span>
      .<span class="cs-property">setQuery</span>(<span class="cs-variable-2">query</span>)
      .<span class="cs-property">setPage</span>(<span class="cs-variable-2">page</span>);
  },
})(<span class="cs-variable">Widget</span>);
</code>
  </div>
</pre>
<h2 id="getmetadataprops-searchstate"><code>getMetadata(props, searchState)</code> <a class="anchor" href="guide/Custom_connectors.html#getmetadataprops-searchstate" aria-hidden="true"></a></h2>
<p>This method allows the widget to register a custom <code>metadata</code> object for any props and state combination.</p>
<p>If your widget is stateful, the corresponding URL key should be declared on the metadata object as the <code>id</code> property, so that the <code>InstantSearch</code> component can determine which URL keys it controls and which are foreign and should be left intact.</p>
<p>The metadata object also allows you to declare any data that you would like to pass down to all other widgets. The list of metadata objects of all components is available as the fourth argument to the <code>getProvidedProps</code> method.</p>
<p>The <code>CurrentRefinements</code> widget leverages this mechanism in order to allow any widget to declare the filters it has applied. If you want to add your own filter, declare a <code>filters</code> property on your widget’s metadata object:</p>
<pre class="code-sample language-jsx">
  <div class="heading">Code</div>
  <div class="code-wrap">
    <code><span class="cs-keyword">import</span> {<span class="cs-def">createConnector</span>} <span class="cs-keyword">from</span> <span class="cs-string">&#39;react-instantsearch&#39;</span>;

<span class="cs-keyword">const</span> <span class="cs-def">CoolWidget</span> <span class="cs-operator">=</span> <span class="cs-variable">createConnector</span>({
  <span class="cs-comment">// displayName, getProvidedProps, refine, getSearchParameters</span>

  <span class="cs-property">getMetadata</span>(<span class="cs-def">props</span>, <span class="cs-def">searchState</span>) {
    <span class="cs-comment">// Since the `queryAndPage` searchState entry isn&#39;t necessarily defined, we need</span>
    <span class="cs-comment">// to default its value.</span>
    <span class="cs-keyword">const</span> [<span class="cs-def">query</span>, <span class="cs-def">page</span>] <span class="cs-operator">=</span> <span class="cs-variable-2">searchState</span>.<span class="cs-property">queryAndPage</span> <span class="cs-operator">||</span> [<span class="cs-string">&#39;&#39;</span>, <span class="cs-number">0</span>];

    <span class="cs-keyword">const</span> <span class="cs-def">filters</span> <span class="cs-operator">=</span> [];
    <span class="cs-keyword">if</span> (<span class="cs-variable-2">query</span> <span class="cs-operator">!==</span> <span class="cs-string">&#39;&#39;</span>) {
      <span class="cs-variable-2">filters</span>.<span class="cs-property">push</span>({
        <span class="cs-comment">// Unique identifier for this filter.</span>
        <span class="cs-property">key</span>: <span class="cs-string-2">`queryAndPage.query`</span>,
        <span class="cs-comment">// String label (or node) that should appear in the CurrentRefinements</span>
        <span class="cs-comment">// component.</span>
        <span class="cs-property">label</span>: <span class="cs-string-2">`Query: ${</span><span class="cs-variable-2">query</span><span class="cs-string-2">}</span><span class="cs-string-2">`</span>,
        <span class="cs-comment">// Describes how clearing this filter affects the InstantSearch searchState.</span>
        <span class="cs-comment">// In our case, clearing the query just resets it to an empty string</span>
        <span class="cs-comment">// without affecting the page.</span>
        <span class="cs-property">clear</span>: <span class="cs-def">nextSearchState</span> <span class="cs-operator">=&gt;</span> {
          <span class="cs-keyword">return</span> {
            <span class="cs-meta">...</span><span class="cs-variable-2">nextSearchState</span>,
            <span class="cs-comment">// Do not depend on the current `searchState` here. Since filters can be</span>
            <span class="cs-comment">// cleared in batches, the `searchState` parameter is not up-to-date when</span>
            <span class="cs-comment">// this method is called.</span>
            <span class="cs-variable">queryAndPage</span>: [<span class="cs-string">&#39;&#39;</span>, <span class="cs-variable-2">nextSearchState</span>.<span class="cs-variable">queryAndPage</span>[<span class="cs-number">1</span>]],
          };
        },
      });
    }

    <span class="cs-keyword">if</span> (<span class="cs-variable-2">page</span> <span class="cs-operator">!==</span> <span class="cs-number">0</span>) {
      <span class="cs-variable-2">filters</span>.<span class="cs-property">push</span>({
        <span class="cs-property">key</span>: <span class="cs-string-2">`queryAndPage.page`</span>,
        <span class="cs-property">label</span>: <span class="cs-string-2">`Page: ${</span><span class="cs-variable-2">page</span><span class="cs-string-2">}</span><span class="cs-string-2">`</span>,
        <span class="cs-property">clear</span>: <span class="cs-def">nextSearchState</span> <span class="cs-operator">=&gt;</span> {
          <span class="cs-keyword">return</span> {
            <span class="cs-meta">...</span><span class="cs-variable-2">nextSearchState</span>,
            <span class="cs-variable">queryAndPage</span>: [<span class="cs-variable-2">nextSearchState</span>.<span class="cs-variable">queryAndPage</span>[<span class="cs-number">0</span>], <span class="cs-number">0</span>],
          };
        },
      });
    }

    <span class="cs-keyword">return</span> {
      <span class="cs-comment">// This widget manipulates the `queryAndPage` state entry.</span>
      <span class="cs-property">id</span>: <span class="cs-string">&#39;queryAndPage&#39;</span>,
      <span class="cs-property">filters</span>,
    };
  },
})(<span class="cs-variable">Widget</span>);
</code>
  </div>
</pre>
<h2 id="searchforfacetvaluesprops-searchstate-nextrefinement"><code>searchForFacetValues(props, searchState, nextRefinement)</code> <a class="anchor" href="guide/Custom_connectors.html#searchforfacetvaluesprops-searchstate-nextrefinement" aria-hidden="true"></a></h2>
<p>This method needs to be implemented if you want to have the ability to perform a search for facet values inside your widget.</p>
<p>It takes in the current props of the higher-order component, the <a href="guide/Search_state.html">search state</a> of all widgets, as well as all arguments passed to the <code>searchForFacetValues</code> props of stateful widgets, and returns an
object of the shape: <code>{facetName: string, query: string}</code></p>
<pre class="code-sample language-jsx">
  <div class="heading">Code</div>
  <div class="code-wrap">
    <code><span class="cs-keyword">import</span> {<span class="cs-def">createConnector</span>} <span class="cs-keyword">from</span> <span class="cs-string">&#39;react-instantsearch&#39;</span>;

<span class="cs-keyword">const</span> <span class="cs-def">CoolWidget</span> <span class="cs-operator">=</span> <span class="cs-variable">createConnector</span>({
  <span class="cs-comment">// displayName, getProvidedProps, refine, getSearchParameters, getMetadata</span>

  <span class="cs-property">searchForFacetValues</span>(<span class="cs-def">props</span>, <span class="cs-def">searchState</span>, <span class="cs-def">nextRefinement</span>) {
    <span class="cs-keyword">return</span> {<span class="cs-property">facetName</span>: <span class="cs-variable-2">props</span>.<span class="cs-property">attributeName</span>, <span class="cs-property">query</span>: <span class="cs-variable-2">nextRefinement</span>};
  },
})(<span class="cs-variable">Widget</span>);
</code>
  </div>
</pre>
<h2 id="cleanupprops-searchstate"><code>cleanUp(props, searchState)</code> <a class="anchor" href="guide/Custom_connectors.html#cleanupprops-searchstate" aria-hidden="true"></a></h2>
<p>This method is called when a widget is about to unmount in order to clean the searchState.</p>
<p>It takes in the current props of the higher-order component and the searchState of all widgets and expect a new searchState in return.</p>
<p><code>props</code> are the props that were provided to the higher-order component.</p>
<p><code>searchState</code> holds the searchState of all widgets, with the shape <code>{[widgetId]: widgetState}</code>. Stateful widgets describe the format of their searchState in their respective documentation entry.</p>
<pre class="code-sample language-jsx">
  <div class="heading">Code</div>
  <div class="code-wrap">
    <code><span class="cs-keyword">import</span> {<span class="cs-def">omit</span>} <span class="cs-keyword">from</span> <span class="cs-string">&#39;lodash&#39;</span>;
<span class="cs-keyword">import</span> {<span class="cs-def">createConnector</span>} <span class="cs-keyword">from</span> <span class="cs-string">&#39;react-instantsearch&#39;</span>;

<span class="cs-keyword">const</span> <span class="cs-def">CoolWidget</span> <span class="cs-operator">=</span> <span class="cs-variable">createConnector</span>({
  <span class="cs-comment">// displayName, getProvidedProps, refine, getSearchParameters, getMetadata</span>

  <span class="cs-property">cleanUp</span>(<span class="cs-def">props</span>, <span class="cs-def">searchState</span>) {
    <span class="cs-keyword">return</span> <span class="cs-variable">omit</span>(<span class="cs-string">&#39;queryAndPage&#39;</span>, <span class="cs-variable-2">searchState</span>)
  },
})(<span class="cs-variable">Widget</span>);
</code>
  </div>
</pre>
<div class="guide-nav">
    <div class="guide-nav-left">
        Previous: <a href="guide/Multi_index.html">← Multi_index</a>
    </div>
    <div class="guide-nav-right">
        Next: <a href="guide/Conditional_display.html">Conditional Display →</a>
    </div>
</div>
</div></div></div></section><footer class="ac-footer"><div class="ac-footer-container"><p class="ac-footer-links">Code licensed under<a class="ac-footer-link-item" href="https://raw.githubusercontent.com/algolia/instantsearch.js/develop/LICENSE">MIT</a><br><a class="ac-footer-link-item" href="https://github.com/algolia/instantsearch.js/tree/v2">GitHub</a><a class="ac-footer-link-item" href="https://github.com/algolia/instantsearch.js/issues">issues</a><a class="ac-footer-link-item" href="https://www.algolia.com/policies/privacy">Privacy policy</a></p></div><div class="ac-footer-container ac-footer-brand"><p>This project is part of</p><img class="ac-footer-brand-icon" src="images/community-badge.svg"><figure><img class="ac-footer-brand-logo" src="https://res.cloudinary.com/hilnmyskv/image/upload/v1484219849/algolia-community-logo-words-darkbg.svg"><figcaption>Algolia Community</figcaption></figure><a class="ac-footer-btn ac-footer-btn-cta" href="https://community.algolia.com/">See More</a><span class="ac-icon ac-icon-love-dark"></span></div><p class="ac-footer-version">Latest version: 3.2.1</p><div class="ac-footer-actions"><div class="footer-container"><p>Build unique search experiences with Algolia</p><a class="ac-footer-btn ac-footer-btn-ghost-grey" href="https://www.algolia.com/why?utm_medium=social-owned&amp;utm_source=instantsearchjs%20website&amp;utm_campaign=homepage&amp;utm_term=why">See Why<span class="ac-icon-triangle"></span></a><a class="ac-footer-btn ac-footer-btn-ghost-blue" href="https://www.algolia.com/users/sign_up?utm_medium=social-owned&amp;utm_source=instantsearchjs%20website&amp;utm_campaign=homepage&amp;utm_term=get_started">Get Started For Free</a></div></div></footer><script src="https://cdn.jsdelivr.net/g/jquery@3(jquery.slim.min.js),docsearch.js@2,underscorejs@1"></script><script>docsearch({
  apiKey: '5cb6763f264e31381e18639a1147634c',
  indexName: 'react-instantsearch',
  inputSelector: '#searchbox',
  debug: true
});
window.twttr = (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
    if (d.getElementById(id)) return t;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);

    t._e = [];
    t.ready = function (f) {
        t._e.push(f);
    };

    return t;
}(document, "script", "twitter-wjs"));
</script><!-- GA--><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-32446386-12', 'auto');
ga('send', 'pageview');</script><!-- Google Tag Manager--><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-N8JP8G" height="0" width="0" style="display:none;visibility:hidden;"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N8JP8G');</script><!-- Twitter--><script>!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
twq('init','nuosw');
twq('track','PageView');</script><!-- Facebook--><script>!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','//connect.facebook.net/en_US/fbevents.js');
fbq('init', '1654938174769952');
fbq('track', "PageView");</script><noscript><img height="1" width="1" style="display:none;" alt="" src="https://www.facebook.com/tr?id=1654938174769952&amp;ev=PageView&amp;noscript=1"></noscript><!-- Addroll--><script type="text/javascript">adroll_adv_id = "TGR7R4XSGVGYVPX4LQBDFQ";
adroll_pix_id = "YQNWNHGUUBD2JMY7BVOBWM";
// adroll_email = "username@example.com"; // OPTIONAL: provide email to improve user identification
(function () {
var _onload = function(){
if (document.readyState && !/loaded|complete/.test(document.readyState)){setTimeout(_onload, 10);return}
if (!window.__adroll_loaded){__adroll_loaded=true;setTimeout(_onload, 50);return}
var scr = document.createElement("script");
var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
scr.setAttribute('async', 'true');
scr.type = "text/javascript";
scr.src = host + "/j/roundtrip.js";
((document.getElementsByTagName('head') || [null])[0] ||
document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
};
if (window.addEventListener) {window.addEventListener('load', _onload, false);}
else {window.attachEvent('onload', _onload)}
}());</script><!-- Pardot--><script type="text/javascript">piAId = '140121';
piCId = '1667';
(function() {
function async_load(){
var s = document.createElement('script'); s.type = 'text/javascript';
s.src = ('https:' == document.location.protocol ? 'https://pi' : 'http://cdn') + '.pardot.com/pd.js';
var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
}
if(window.attachEvent) { window.attachEvent('onload', async_load); }
else { window.addEventListener('load', async_load, false); }
})();</script><script src="/instantsearch.js/react/js/common.80f7260031ad05e00137-build.js"></script><script src="/instantsearch.js/react/js/main.80f7260031ad05e00137-build.js"></script></body>